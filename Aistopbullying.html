<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <style>

  </style>
  <link rel="stylesheet" href="phoneAistopbullying.css">
  <link rel="stylesheet" href="./swiper.min.css" />
  <script src="./swiper.min.js"></script>
  <link href="Aistopbullying.css" rel="stylesheet">
</head>

<body>
  <main>
    <section class="sec">
      <div class="neirongbox ">
        <image src="../aiimage/ai/dian.png" class="dianstyletwo"></image>
        <div class="neirong w">
          <image src="../aiimage/ai/dian.png" class="dianstyle"></image>
          <h1 class="neititle">
            <image src="../partimage/attendance/star.png" class="start_left_img"></image>校园安全不容乐观<image
              src="../partimage/attendance/star.png" class="start_right_img"></image>
          </h1>
          <h6 class="neititletwo">数据来源：司法大数据专题报告</h6>
          <div class="banners" id="banners">
            <div class="swiper neibigbox slides " id="slider" style="width: 100%;">
              <div id="wrap">
                <div class="neibox slide swiper-slide">
                  <div class="neileft">
                    <h2>五成校园暴力事件因琐事而起</h2>
                    <div class="heixian"></div>
                    <div class="longxian"></div>
                    <p>校园暴力案件中，55.12%因发生口角、小摩擦等琐事而引发；</p>
                    <p class="ptwo">因满足个人私欲进行抢劫、敲诈勒索、强迫卖淫、侮辱、强奸等犯罪行为的案件占18.08%</p>
                  </div>
                  <ul class="neiright">
                    <li class="li_style"><span class="spantitle">因琐事</span>
                      <div class="neidi">
                        <div class="neitop"></div><span class="spansu">55.12%</span>
                      </div>
                    </li>
                    <li class="li_style"><span class="spantitle">为满足个人私欲</span>
                      <div class="neidi">
                        <div class="neitop Selfish"></div><span class="spansu">18.08%</span>
                      </div>
                    </li>
                    <li class="li_style"><span class="spantitle">因感情问题</span>
                      <div class="neidi">
                        <div class="neitop problem"></div><span class="spansu">4.80%</span>
                      </div>
                    </li>
                    <li class="li_style"><span class="spantitle">无故滋事</span>
                      <div class="neidi">
                        <div class="neitop Cause"></div><span class="spansu">2.93%</span>
                      </div>
                    </li>
                    <li class="li_style"><span class="spantitle">发泄个人情绪</span>
                      <div class="neidi">
                        <div class="neitop emotion"></div><span class="spansu">1.98%</span>
                      </div>
                    </li>
                    <li class="li_style"><span class="spantitle">其他</span>
                      <div class="neidi">
                        <div class="neitop other"></div><span class="spansu">17.09%</span>
                      </div>
                    </li>
                  </ul>
                </div>
                <div class="neibox neibox_one slide swiper-slide">
                  <ul class="neiright neiright_one">
                    <li>
                      <div class="neidi">
                        <div class="neitop room"></div><span class="spansu">35.31%</span>
                      </div><span class="spantitletwo">宿舍</span>
                    </li>
                    <li>
                      <div class="neidi">
                        <div class="neitop classroom"></div><span class="spansu">19.22%</span>
                      </div><span class="spantitletwo">教室</span>
                    </li>
                    <li>
                      <div class="neidi">
                        <div class="neitop lavatory"></div><span class="spansu">13.13%</span>
                      </div><span class="spantitletwo">厕所</span>
                    </li>
                    <li>
                      <div class="neidi">
                        <div class="neitop corridor"></div><span class="spansu">11.22%</span>
                      </div><span class="spantitletwo">走廊楼道</span>
                    </li>
                    <li>
                      <div class="neidi">
                        <div class="neitop playground"></div><span class="spansu">9.35%</span>
                      </div><span class="spantitletwo">操场</span>
                    </li>
                    <li>
                      <div class="neidi">
                        <div class="neitop othertwo"></div><span class="spansu">11.77%</span>
                      </div><span class="spantitletwo">其他</span>
                    </li>
                  </ul>
                  <div class="neileft left_right">
                    <h2>“宿舍”已成为校园暴力事件高频用词</h2>
                    <div class="roomright">
                      <div class="heixian"></div>
                      <div class="longxian"></div>
                    </div>
                    <p class="ptwotwo">通过对校园内教室、宿舍等场所进行词频分析发现，有35.31%的校园暴力事件中出现了宿舍一词；</p>
                    <p class="ptwotwo ptwo_copy">在涉及故意杀人罪的校园暴力案件中，65.12%的案件出现了“宿舍”一词</p>
                  </div>
                </div>
                <div class="neibox slide swiper-slide">
                  <div class="neileft nei_left_one">
                    <h2>11.59%的校园暴力案件中出现受害人死亡的情况</h2>
                    <div class="heixian"></div>
                    <div class="longxian"></div>
                    <p> 88.74%的校园暴力案件受害人存在不同程度的伤亡情况;</p>
                    <p class="ptwo">在校园暴力案件中，11.59%的案件受害人死亡；31.87%的案件中受 害人涉及重伤；38.54%的案件中受害人涉及轻伤；27.94%的案件中受害人涉及轻微伤</p>
                  </div>
                  <ul class="neiright">
                    <li class="li_style"><span class="spantitle">死亡</span>
                      <div class="neidi">
                        <div class="neitop die"></div><span class="spansu">11.59%</span>
                      </div>
                    </li>
                    <li class="li_style"><span class="spantitle">重伤</span>
                      <div class="neidi">
                        <div class="neitop hart"></div><span class="spansu">31.87%</span>
                      </div>
                    </li>
                    <li class="li_style"><span class="spantitle">轻伤</span>
                      <div class="neidi">
                        <div class="neitop littlehart"></div><span class="spansu">38.54%</span>
                      </div>
                    </li>
                    <li class="li_style"><span class="spantitle">轻微伤</span>
                      <div class="neidi">
                        <div class="neitop littlehartone"></div><span class="spansu">27.94%</span>
                      </div>
                    </li>

                  </ul>
                </div>
              </div>
            </div>
            <ol class="dots" id="banner-nav">
            </ol>
          </div>
        </div>
      </div>
    </section>

  </main>
</body>
<script>
  function setFont() {
    let fontSize = 0
    fontSize = document.body.clientWidth / 10
    document.documentElement.style.fontSize = fontSize + 'px'
    console.log(document.body.clientWidth);
  }
  setFont()
  window.onresize = function() {
    setFont()
  }
  window.onload = function() {
    var carousel = document.querySelector('.banners');
    var carouselUl = document.querySelector('.slides');
    var carouselLis = document.getElementsByClassName('slide');
    var points = carousel.querySelector('ol');
    // 屏幕的宽度
    var screenWidth = document.documentElement.offsetWidth;
    if (screenWidth < 768) {
      document.querySelector('#wrap').classList.add('swiper-wrapper');
      var swiper = new Swiper("#slider", { loop: true, });
      // 动态生成小圆点
      for (var i = 0; i < carouselLis.length; i++) {
        var li = document.createElement('li');
        if (i == 0) {
          li.classList.add('active');
        }
        points.appendChild(li);
      }
      // 动态设置小圆点的active类
      var pointsLis = points.querySelectorAll('li');
      // 初始三个固定的位置
      var left = carouselLis.length - 1;
      var center = 0;
      var right = 1;

      var curIndex = 0

      // 归位（多次使用，封装成函数）
      // setTransform();

      // 分别绑定touch事件
      var startX = 0; // 手指落点
      var startTime = null; // 开始触摸时间
      carouselUl.addEventListener('touchstart', touchstartHandler); // 滑动开始绑定的函数 touchstartHandler
      carouselUl.addEventListener('touchmove', touchmoveHandler); // 持续滑动绑定的函数 touchmoveHandler
      carouselUl.addEventListener('touchend', touchendHandeler); // 滑动结束绑定的函数 touchendHandeler

      // 轮播图片切换下一张
      function showNext() {
        // 轮转下标
        left = center;
        center = right;
        right++;
        //　极值判断
        curIndex++
        if (curIndex > carouselLis.length - 1) {
          curIndex = 0
        }
        if (right > carouselLis.length - 1) {
          right = 0;
        }
        //添加过渡（多次使用，封装成函数）
        // setTransition(1, 1, 0);
        // 归位
        // setTransform();
        // document.querySelector('#slider').style.transform = 'translateX(' + dx + 'px)';

        // 自动设置小圆点
        setPoint();
      }

      // 轮播图片切换上一张
      function showPrev() {
        // 轮转下标
        right = center;
        center = left;
        left--;
        curIndex--;
        if (curIndex < 0) {
          curIndex = carouselLis.length - 1
        }
        //　极值判断
        if (left < 0) {
          left = carouselLis.length - 1;
        }
        //添加过渡
        // setTransition(0, 1, 1);
        // 归位
        // setTransform();
        // 自动设置小圆点
        setPoint();
      }

      // 滑动开始
      function touchstartHandler(e) {
        // 记录滑动开始的时间
        startTime = Date.now();
        // 记录手指最开始的落点
        startX = e.changedTouches[0].clientX;
      }
      // 滑动持续中
      function touchmoveHandler(e) {
        // 获取差值 自带正负
        var dx = e.changedTouches[0].clientX - startX;
        // 干掉过渡
        // setTransition(0, 0, 0);
        // 归位
        // setTransform(dx);
      }
      //　滑动结束
      function touchendHandeler(e) {
        // 在手指松开的时候，要判断当前是否滑动成功
        var dx = e.changedTouches[0].clientX - startX;
        // 获取时间差
        var dTime = Date.now() - startTime;
        // 滑动成功的依据是滑动的距离（绝对值）超过屏幕的三分之一 或者滑动的时间小于300毫秒同时滑动的距离大于30
        if (Math.abs(dx) > screenWidth / 3 || (dTime < 300 && Math.abs(dx) > 30)) {
          // 滑动成功了
          // 判断用户是往哪个方向滑
          if (dx > 0) {
            // 往右滑 看到上一张
            showPrev();
          } else {
            // 往左滑 看到下一张
            showNext();
          }
        } else {
          // 添加上过渡
          // setTransition(1, 1, 1);
          // 滑动失败了
          // setTransform();
        }
      }
      // 设置过渡
      function setTransition(a, b, c) {
        if (a) {
          carouselLis[left].style.transition = 'transform 1s';
        } else {
          carouselLis[left].style.transition = 'none';
        }
        if (b) {
          carouselLis[center].style.transition = 'transform 1s';
        } else {
          carouselLis[center].style.transition = 'none';
        }
        if (c) {
          carouselLis[right].style.transition = 'transform 1s';
        } else {
          carouselLis[right].style.transition = 'none';
        }
      }

      //　封装归位
      function setTransform(dx) {
        console.log(dx, 'dx');
        dx = dx || 0;
        document.querySelector('#slider').style.transform = 'translateX(' + dx + 'px)';
        if (curIndex === 0) {

        } else if (curIndex === 1) {

        } else {

        }
        // if (curIndex === 0) {
        //   carouselLis[left].style.transform = 'translateX(' + (-screenWidth + dx) + 'px)';
        //   carouselLis[center].style.transform = 'translateX(' + dx + 'px)';
        //   carouselLis[right].style.transform = 'translateX(' + (screenWidth + dx) + 'px)';
        // } else if (curIndex === 1) {
        //   carouselLis[left].style.transform = 'translateX(' + (-screenWidth * 2 + dx) + 'px)';
        //   carouselLis[center].style.transform = 'translateX(' + (-screenWidth + dx) + 'px)';
        //   carouselLis[right].style.transform = 'translateX(' + (dx) + 'px)';
        // } else {
        //   carouselLis[left].style.transform = 'translateX(' + (-screenWidth * 3 + dx) + 'px)';
        //   carouselLis[center].style.transform = 'translateX(' + (-screenWidth * 2 + dx) + 'px)';
        //   carouselLis[right].style.transform = 'translateX(' + (-screenWidth + dx) + 'px)';
        // }
      }

      function setPoint() {
        for (var i = 0; i < pointsLis.length; i++) {
          pointsLis[i].classList.remove('active');
        }
        pointsLis[center].classList.add('active');
      }
    }
  }
</script>

</html>
